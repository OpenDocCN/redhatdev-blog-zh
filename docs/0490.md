# Linux 作弊代码

> 原文:[https://developers . red hat . com/blog/2020/04/17/Linux-cheat-codes](https://developers.redhat.com/blog/2020/04/17/linux-cheat-codes)

开发现场技术讲座由创造我们产品的红帽技术专家主持。这些会议包括真正的解决方案加上代码和示例项目，以帮助您开始。在这次演讲中，你将从[马克西姆·伯格豪特](https://developers.redhat.com/blog/author/mburgerhout/)和[伯尔·萨特](https://developers.redhat.com/blog/author/burrsutter/)那里学到 Linux 作弊代码。

在这个快节奏、充满动作的会议中，我们将向您展示大量的 Linux 技巧、窍门和操作方法，这些加起来就是开始掌握 Linux 操作系统所需的作弊代码。我们将从简单开始，但过一会儿，我们将深入兔子洞。为神秘的 shell 魔法、进程管理、配置 SELinux、快速操作文件等等做好准备。

[https://www.youtube.com/embed/q7AFscKwKVc?autoplay=0&start=0&rel=0](https://www.youtube.com/embed/q7AFscKwKVc?autoplay=0&start=0&rel=0)

## 了解更多信息

加入我们即将到来的开发者大会，看看我们收集的[过去的开发技术演讲](https://developers.redhat.com/devnation/?page=0)。

## 聊天文本

伯尔·萨特(02:01):
好吧。我叫伯尔·萨特。我现在正在 Devnexus 为您现场直播，所以如果您听到我的背景中有一堆噪音，那是因为我这里有一大群人。在这里，我把摄像机转到你们能看到的地方。现在我们实际上正在 Devnexus 开会，所以没有很多人在展厅里跑来跑去，但你可以看到这是一个相当大的区域。这里有 2000 多人。今天早上我做了主题演讲。我们从中获得了很多乐趣，但是现在我们有一个很棒的话题给你们。我们将讨论 Linux，成为 Linux 的核心。我对此感到兴奋。我们的明星在这里，马克斯，他基本上致力于我们的 Linux 高级教学。我已经添加了聊天链接。确保你拿到一份拷贝。我们将在聊天显示中为您提供更多链接。

**Burr Sutter (02:37):**
另外请记住，您可以将您的问题放入聊天中，添加到聊天中，我们会将尽可能多的问题排好队，在演示结束时尽快回答。所以麦克斯现在要给我们讲一大堆很棒的东西。准备好了吗，麦克斯？

马克西姆·伯格豪特(02:51):
绝对地。我们走吧。

伯尔·萨特(02:57):
妙极了。

**马克西姆·伯格豪特(02:58):**
伟大。让我分享一下那个画面。看看效果如何。我们走吧。所以我叫马克西姆·伯格豪特。我是荷兰比荷卢地区的首席解决方案架构师。基本上就是说，今天我将向你们展示很多与 Linux 相关的东西。节奏会很快，所以如果你对某个话题不感兴趣，请稍等几秒钟，因为下一个话题可能会让你非常感兴趣。

**马克西姆·伯格豪特(03:25):**
很简单，我，我又是马克西姆·伯格豪特。我在 Twitter 的@maximburghout 上发了很多微博。我也有一个 YouTube 频道，我也用它来发布关于红帽产品的东西，还有一个叫 100things.wzzrd.com 的博客。平心而论，博客最近已经更新了，YouTube 频道还没有，但我会努力多做一点。如果你想就我接下来 30 分钟左右要讲的任何话题联系我，请随时通过 Twitter 或电子邮件给我发消息，但我没有飞行的 SLA。所以我会试试看，但是我可能要花一点时间，尤其是如果交通拥挤的话。

Maxim Burgerhout (04:01):
我今天要讲的是关于特权的提升。我将讨论作业控制、历史管理、一点 SELinux、一点 ACL。我要让你看看什么是赫里多克。我将看看网络，我们将看看 systemd 的服务管理。我将尝试将一些高级主题和一些入门级主题混合在一起，所以我希望我能为每个人提供一些东西。

**马克西姆·伯格豪特(04:25):**
让我快速切换到我的终端，我们将直接进入它。这里我们有一台原始的 RHEL 8 号机器。我现在将假装我是一名开发人员，我将假装我是一名想要在 Apache 上部署一个小 PHP 应用程序的开发人员。现在您可能知道，您可以用 yum 命令在 RH 上安装包。所以我要去 yum 安装 httpd，php，php-gd(图像库)和 php-(我觉得 Postgres 就是 pgsql)。

**马克西姆·伯格豪特(04:53):**
你不必使用 DNF，他是 RHEL 8 上的新软件包经理。你可以用 yum。这将导致燃烧相同的二进制文件，如果我点击这个命令，观察的用户可能已经注意到这不会运行，因为 yum 命令实际上需要提升 Linux 上的特权来安装包。现在我可以在这一点上击，然后向左击一百万次，一直到线的起点。这不是真正有效的。我也可以向上点击，然后按 Ctrl+K 键回到左边，或者按 Ctrl+左箭头键回到开头。那也不是真的高效。

**Maxim burger hout(05:25):**
我甚至可以按 Ctrl+A 键返回到代码行的开头，按 Ctrl+E 键返回到前面，但是这些选项都没有按 sudo 键然后点击感叹号(！)两次，这两次将执行前面的命令，但是在前面加上两次。这本身也不会起作用，因为你可能已经注意到我故意打错了。哦，因为我想向你展示一个小技巧，你可以用它来修改你在 Linux 中的历史，那就是修改你之前的命令，我可以输入胡萝卜(^)，这是我在这里输入的三角字符，然后我想用这个来替换它。

**Maxim burger hout(06:07):**
如果我再次按回车键，这个命令行实际上会工作，它会安装 Apache、PHP 和其他一些东西。因为它正在运行，只需要 20 或 30 秒左右，我想简单提一下，我一直在做 sudo 的事情。我不是以 root 身份这么做的，因为我认为一直以 root 身份运行是反作弊的。这实际上使你的生活变得更困难，而不是更容易，因为当你把它投入生产时，你的应用程序的实际需求是什么也不会教你的。

**马克西姆·伯格豪特(06:40):**
所以凡事不要以根为单位。为自己设置一个 sudoer 帐户，如果你发现你的普通个人帐户没有足够的权限，就使用它。现在，作为编辑 sudoers 文件的一个小技巧，我建议你使用 sudo visudo。只是不要在普通的 sudoers 帐户上，在普通的 sudoers 文件上使用 VIM 或 Emacs 或其他任何东西，因为那里没有语法检查。你可以编辑文件，保存它，你可以把你自己锁在根帐户之外，这是非常非常不方便的，你可以想象。

Maxim Burgerhout (07:15):
如果你像我现在这样使用 visudo，你实际上可以免费获得 sudeoers 文件的语法检查。因此，我可以在这里取出我的云用户行，我将注释掉这一行，我将注释掉这一行，我将在这里添加一个逗号。那个逗号有语法错误。现在看看当我保存这个文件时会发生什么。它会给我一个错误信息。它会告诉我，你有一个语法错误行 110，指向逗号。现在我该做什么？

Maxim Burgerhout (07:41):
我可以再次编辑这个文件，保存它而不做任何更改，或者保存我刚才所做的更改，这将基本上锁定我的 sudoers 权限。所以这不是我想做的事。我想再编辑一下，回到第 110 行，我已经在那了。去掉逗号，保存这个文件，现在它实际上已经以正确的方式编辑过了，我可以看到我拥有的所有权限。

Maxim Burgerhout (08:03):
所以不要总是以 root 用户的身份运行命令，这实际上会让你的日子更难过。现在，您可能熟悉这样一个事实，Linux 有一个 history 命令，用于 Linux 配备的各种 shells。我已经用胡萝卜符号给你们展示了对前面命令的修正。您也可以通过运行 history 来查看您的历史记录，您会看到我之前输入的所有命令都列在那里，我可以通过使用感叹号来运行之前的命令之一，然后八，例如，将显示谁再次执行了 sudo -L 命令。

**Maxim burger hout(08:38):**
现在，如果我在这个空目录中运行 ls，ls，ls，ls，ls，history，就会看到 ls 命令只被添加到历史文件中一次，这是因为我们有一个名为 HISTCONTROL 的环境变量，它被设置为忽略重复命令，忽略命令的直接精确复制。所以它将只把 ls 命令添加到我的 sudo 或历史文件中一次。

Maxim Burgerhout (09:02):
但是你可能会注意到，这里有两个 ls，如果我去 ls，echo，不管是什么 echo，ls echo，它实际上是...ls 实际上在那里放了很多次，这真的不太方便，因为我想使用我的历史文件来保存尽可能多的有用命令的历史记录，而不是重复我一天要发出 1000 次的命令。

**马克西姆·伯格豪特(09:29):**
为了让我的历史记录忽略所有随着时间的重复，不仅仅是直接的重复，还有随着时间的重复，我可以设置 HISTCONTROL 命令来删除它们。如果我删除了这些，我会检查我的历史。有几个...里面提到了 ls。如果我再次访问 ls 并运行 history，您会看到以前的 ls 实例现在都不见了，因此您会得到更多有用的历史记录，而不是杂乱无章。

**Maxim burger hout(09:57):**
你们可能都遇到过这样的情况，你必须输入一个有点秘密的命令，因为它的密码带有密码标志或类似的东西。这将增加...这也将成为你的历史。所以你知道这个命令，对吗？这是一个秘密命令，它有一个密码标志，因为我的秘密密码在那里。

Maxim Burgerhout (10:14):
现在如果我执行这个，它将以纯文本的形式出现在我的历史文件中。这可能也是我不想要的，所以如果我再次使用 HISTCONTROL 命令并添加冒号、忽略、空格(:ignore)，您实际上可以很好地执行这个秘密命令...嗯，不完全安全。有更好的方法可以做到这一点，但我只想给你看这个。我的秘密密码，你现在会看到有一个错误，因为命令不存在。这都不重要。

**Maxim burger hout(10:43):**
如果我在这里运行历史，你会看到秘密命令没有在我的历史文件中结束，因为我用空格表示它，我必须忽略那里的空格[听不清 00:10:51]。现在，如果您想一直启用这个 HISTCONTROL 环境变量，那么每次登录到 Linux 机器时，您只需编辑您的。bashrc 文件，然后你就到了底部。那里是出口。放下那条线，你就救了它。您重新登录后，每次都会启用它。的。bashrc 是您的 shell 的配置文件。

马克西姆·伯格豪特(11:15):
现在还有一件关于历史的趣事要告诉你。如果你按 Ctrl+R，你实际上可以在你的历史中向后搜索。所以我去控制它，它可以看到...再次按 Ctrl+R，我实际上可以滚动历史中 HISTCONTROL 的所有事件。这是反向搜索，正如你在这里看到的，实际上还有一个正向搜索，它被映射到 Ctrl+S 而不是 Ctrl+R (R 代表反向搜索，S 代表搜索)，但是 S 也意味着暂停我的 shell。

马克西姆·伯格豪特(11:41):
所以，如果我在这里按 Ctrl+S，我就可以键入我想要的任何内容。除非我按下 Ctrl+Q，否则它不会在我的 shell 中结束。因此，如果您有一个看起来没有响应的 shell，请尝试按下 Ctrl+Q，因为这将解除您的 shell 暂停，并且您可能已经恢复了您的 shell。这里有个小提示。让我们转到我们称之为作业控制的东西。让我们对 www.redhat.com 做一个 ping，就在那里。Linux 上的 Ping 不会结束。所以如果我让它运行，它会一直运行下去，直到时间结束。

**Maxim burger hout(12:16):**
如果你出于某种原因想要暂停这个命令，我将按 Ctrl+Z。可以看到它现在已经停止，我在那里得到了一个作业 ID。所以这个命令是不停的。我可以找到工作，得到和那里一样的产量。第一项作业已停止，并 pinged 了 www redhat.com。我认为，您可以通过运行 fg 将该命令带回到前台，我的 ping 命令将继续运行，我们只需保持...基本上从这个命令的上一次迭代停止的地方继续。

**Maxim burger hout(12:45):**
如果我再按 Ctrl+Z 或者 Z .我不知道你们的家伙是美国人还是英国人或者可能是其他语言，但是 Z 或者 Zed，我可以按 bg 作为背景。现在这个命令，ping 命令将继续运行，但是我也可以取回我的 shell。现在，ping 命令的输出将直接进入我的 shell，因为这是一个演示。但是您可以对这可能有用的用例有一点感觉。

**马克西姆·伯格豪特(13:11):**
我可以再次点击前台，把这个带回到前台，再按 Ctrl+Z，让它再次进入暂停模式或停止模式，暂停它。我可以这样做，但我现在不打算这样做，我可以通过 disown 命令取消这种关系，然后我可以从这台计算机注销，ping 命令将继续在后台运行。我现在不会那么做。或者，我可以通过%1 来终止作业，我将终止已经运行的作业。把它放回前台，我已经杀了它。好吧，对不起。很抱歉。有点困惑。

**Maxim burger hout(13:41):**
但是如你所见，我可以通过运行%1 来终止后台的作业，这样我就不必查找作业 ID 或进程 ID 或其他任何东西。我可以通过给出[inaudible 00:13:55] kill 作业的作业 ID 来杀死它。现在你可能已经注意到了，我不做 kill -9，我看到很多人去 kill -9 一切。Kill -9 就像用玩具枪射击大炮一样。Kill -9 基本上告诉您的程序立即死亡，这对于 ping 来说是没问题的，但是如果您正在 kill-9 数据库，您的数据库将在没有写入磁盘的情况下死亡，这可能不是您想要的。

**马克西姆·伯格豪特(14:23):**
因此，尝试在不使用-9 的情况下首先向程序发送终止信号，如果这不起作用，您可以随时恢复添加-9[听不清 00:14:31]。不要什么都杀。你将会在痛苦的世界中结束。今天的工作控制到此为止。

**马克西姆·伯格豪特(14:39):**
我还想谈一会儿塞利努斯。SELinux 在安全性方面非常有用。有些人觉得有点困惑。所以我将向你们展示一点 SELinux 是如何的不可怕，以及如果你知道你在做什么，SELinux 实际上是如何被相当容易地操纵的。所以我就装了 Apache，对吧？现在，让我们只是，当然，让我们只是确保 Apache 实际上可以启动。所以我要启动 httpd。Systemctl，在 RHEL 上启动和停止恶魔的命令。我将启动它，并运行 status 命令，它将为我提供有关此过程的大量信息。

马克西姆·伯格豪特(15:17):
它实际上现在正在运行。默认情况下，它不会运行，因为供应商预设被禁用。所以这个程序默认不运行。如果我安装 Apache 并重启我的机器，默认情况下它不会启动。如果我想让它默认启动，我需要启用 httpd。因此，如果我确实启用了，再次获取您的状态，我们将看到它在以前禁用的位置现在已启用。它现在正在端口 80 上侦听，这很有趣，因为我的应用程序很奇怪，我真的想在端口 8001 上运行它。

马克西姆·伯格豪特(15:47):
让我暂停一下。哦，等等，不，让我来...抱歉，还有一件事。如果我们想检查哪种 SELinux 上下文，我的 httpd，我的 Apache 进程，httpd 正在运行，我进入 ps-efZ (zed)或 Z，我将在这里进入 grep for Apache，https，它将显示我的 Apache 进程正在运行 httpd SELinux 上下文。这对以后很重要。我会告诉你我要用它做什么。

**Maxim burger hout(16:16):**
现在我要让 Apache 停止一段时间，因为我们要更改端口，我们要编辑 Apache 配置文件，让 Apache 在端口 8001 上运行。为了知道我需要编辑哪个文件，我可以运行 rpm -qc 加上 Apache RPM 的名称，它会告诉我我们进入了什么配置文件。我也可以做-qd，顺便说一下，只是在文档中注明，但我需要配置文件。我将向您展示配置文件和配置...Apache 的主要配置文件是这个。我要用 sudo -e 编辑它，因为我不想弄清楚今天我最喜欢的编辑器是什么。我将选择我的默认值。

Maxim burger hout(16:56):
Sudo-e 以蛮力模式启动我的编辑器，所以在我的例子中是 vi。首先，我将找到 listen 指令，因此 listen 指令告诉 Apache 要监听哪个端口。我要把它从 80 改成 8001，好吗？希望你们都还和我在一起。我看不到你们点头，也看不到你们是否感兴趣或厌烦，但我会假设这对每个人来说都是有趣的。

**Maxim burger hout(17:20):**
我将再次尝试启动 Apache，您将看到这是否会失败。你会想，“为什么会失败？为什么这是失败的？”你要运行状态。状态告诉我 Apache 不能绑定到地址 8，001，如果你考虑到这个系统实际上运行的是 SELinux，这实际上是可以理解的。您将运行 status，sestatus 告诉我此时 SELinux 已启用，我们实际上可以看看 SELinux 知道哪些类型的端口。管理，列出我的端口。

Maxim burger hout(17:54):
SELinux 中的每个端口都有一个标签，SELinux 基本上告诉 Linux 内核哪个应用程序可以绑定到哪个端口。所以基本上 SELinux 知道这些是 Apache 端口列表。我将列出所有端口，然后对 443 执行 grep。这是 Apache 端口列表，Apache 进程使用 httpd 内容、HTTPD_T、SELinux 上下文运行，并绑定到端口 80、端口 81、端口 443、端口 8008、端口 8009。但是你可以看到端口 8001 不在这里。所以我们需要让 SELinux 意识到我们希望 Apache 在端口 8001 上运行。

马克西姆·伯格豪特(18:35):
这是我们唯一需要做的事情，之后一切都会好的。我们将能够保留 SELinux 提供给我们的安全性，并且仍然在端口 8001 上运行我们的应用程序。我们让 SELinux 意识到我们希望 Apache 在端口 8001 上运行的方式是，我们要进行 semanage，我们要添加一个端口，我们要在这边添加一个端口，Apache SELinux 端口类型。我们只希望为 QCP 这样做，因为 Apache 运行在 QCP 连接上，我们希望通过端口 8001 这样做。因此，运行这个命令，大约需要一秒钟，然后我们再次运行 desk command。

马克西姆·伯格豪特(19:15):
我们要检查 443 号端口。如您所见，8001 现在位于标记为 Apache 的端口列表中。你唯一需要做的...只需用 http_port_t 重新标记该端口，现在我就可以在该端口上启动 Apache 了。转到 systemctl，开始，启动 Apache，现在它正在运行，您会看到它现在正在端口 8001 上运行。

**Maxim burger hout(19:41):**
现在，如果这一切有点快，今天演示结束时的幻灯片，我必须链接到大量关于 SELinux 的文档，您可以在自己的时间里阅读这些文档，但我只想告诉您，SELinux 并不可怕。其实挺有用的。这是 RHEL 非常非常好的安全特征，如果你知道你在做什么，它不容易被操纵。

**Maxim burger hout(20:03):**
还有一件事我想说说 SELinux，就在 SELinux 的背景下。您可能知道，Apache 和 PHP 经常运行需要连接到数据库的应用程序(MySQL、PostgreS 等等)。这些应用程序、数据库可能运行在同一台机器上，也可能运行在不同的机器上。默认情况下，SE Linux 不允许 Apache 访问运行在不同服务器上的数据库。那是因为安全。我们不希望 Apache 做我们没有明确允许的事情，这是我们需要明确允许 Apache 做的事情。

Maxim burger hout(20:40):
SELinux 知道 boolean 的概念，我们基本上可以列出这个系统上的所有 boolean，基本上 boolean 是 SELinux 的可组合部分，允许应用程序做某件事。在这种情况下，我只是向您展示所有可用于 SELinux 和 http 的布尔值，它们是与 Apache 相关的布尔值。你会看到那里有一个。它说 httpd 可以通过网络连接到数据库。默认情况下，这是关闭的。因此 SELinux 阻止在 Apache 环境中运行的应用程序连接到不同系统上的数据库。

**马克西姆·伯格豪特(21:16):**
如果我想打开这个开关，就走吧...那是 get SELinux boolean，我要快速复制一下，因为它很长，我要翻到 on。就是这样。我的应用程序现在将能够连接到数据库。[听不清 00:21:32]。我们到了。现在已经打开了。如果我想在重启后永久保存，我已经用-P 标志再次执行了，现在我可以重启任意多次。Apache 仍然能够连接不同系统上的数据库。

**Maxim burger hout(21:51):**
现在，我们有一个 Apache 在这个系统的 8001 端口上运行。8001，这是 Apache 在一台 Red HatEnterprise Linux 8 机器上测试页面的输出。让我们转到我们将应用程序文件写入的目录/var/www/html。作为云用户，我不能不在这里写，因为这个目录是 root 所有的。所以我们想要做的是在这个目录中设置一个 ACL，即访问控制列表。

**Maxim burger hout(22:21):**
而我们要做到这一点，就要运行 set file ACL。将要修改[听不清 00:22:26]。修改组的 ACL，该组是云用户，因为那是我的...我将获得这个目录的读、写和执行权限，基本上就是这样。因为我希望能够读写写入该目录的新文件，所以我将使默认 ACL 保持不变。

马克西姆·伯格豪特(22:43):
现在我实际上能够在这个目录中写作。正如您所看到的，我们有了所有的文件，在 ls 的输出中，目录本身现在有了加号(+)。又来了。以前没有，现在有了。这表明该目录中有一个 ACL。因此，如果他们将在 foo 上获得文件 ACL，这将使我实际上拥有对该文件的读写权限。这很有用，因为我们想在这里写一个索引。

**Maxim burger hout(23:11):**
现在，我要做的索引，我要写那个索引，用一个叫做 heredoc 的概念索引那个 HTML。heredoc 是 Linux 中的一个概念，经常在脚本中使用，你可能以前见过。它们看起来像这样。基本上，它们以 cat 命令(concatenate)开始，然后它们基本上是一个随机单词、一个 EOF 和一个文件，通常用于此，因为它并不经常用于接下来的所有内容。我们要把这些都写出来，写进 index.html。

马克西姆·伯格豪特(23:40):
当我按下回车键的时候，从现在开始我写的所有东西都会被写到 index.html。这是伯尔和马克西姆的现场直播。给你。这非常好。随便啦。然后我写 EOF，文件结束，这表示我写完了。按回车键，我的 shell 将返回。我现在在这里有一个 index.html 文件，然后我将 curl localhost...哦，漏了一个。端口 8001 上的本地主机。它将看到我刚刚编写的 index.html 的输出。我希望这是有用的。我在编写 bash 脚本时会一直使用 heredocs，所以如果你们经常编写 bash 脚本，并且希望 bash 脚本在某个时候将一些数据写入文件，那么 heredocs 是你们的好朋友。

马克西姆·伯格豪特(24:32):
所以让我们继续前进。你们可能还记得，我也想谈谈这个。我不打算花太多时间谈论 systemd，尽管它是一个很棒的特性。但是您可能还记得 systemctl status httpd 的输出，它显示了此时该进程的内存使用情况。现在，让我们假设我正在与大量其他应用程序共享这个系统，我想将我的 Apache web 服务器限制在 256MB 的 RAM。方法是进入 systemctl edit httpd。

Maxim Burgerhout (25:08):
这将为我提供一个编辑器，我可以在其中覆盖 systemd 中我们称为单元文件的某些方面。该单元文件基本上...我很快给你看一个。看起来是这样的。这是阿帕奇单位文件。顶部有很多评论。单元文件描述了 Apache 服务的依赖性，哪些服务必须首先启动，文档在哪里，这是哪种服务，启动命令是什么，重新加载命令是什么，我们如何终止它，它是否有私有的 tmp 目录，等等。

**Maxim burger hout(25:41):**
我不想覆盖整个文件，因为当 Red Hat package maintainer for Apache 更改某些东西时，我实际上希望得到那个更改。也许这是一件非常愚蠢的事情...事实上，我可以重新加载，我们可能会在未来的 Apache 包版本中更改它。如果我覆盖了整个文件，我就不会得到改变。

**马克西姆·伯格豪特(26:00):**
所以我想做的是创造我们所说的“插入式”。插件基本上是一个小文件，只覆盖单元文件的一部分，也就是 Apache 单元文件。同样，我们通过 sudo systemctl edit(在那边)edit，HTTPD 来实现。它给了我一个空编辑器。我现在可以添加一个指令来覆盖单元文件某些方面。在这里，我将在单元文件中添加一行。我不会覆盖任何东西。我将添加一个内存限制，256MB 的限制。我们走吧。我保存它。现在看看我运行的 Apache 单元发生了什么。它现在的内存限制是 256MB。它甚至没有重新启动，因为它在七分钟前就开始了，但是通过那边的入口，那是我的入口。这是我刚刚创建的文件。

马克西姆·伯格豪特(26:57):
你不必记得你需要在哪里创造这个。如果你编辑 httpd，它会自动在正确的位置创建它。通过那边那个小文件的内容，我现在已经为这个服务创建了一个内存限制，您也可以通过这种方式覆盖您的 systemctl 恶魔的各个不同方面。

马克西姆·伯格豪特(27:17):
现在，最后一件事，因为我想我们快没时间了。我还想快速展示一个东西。我们知道 Apache 现在运行在端口 8001 上。但是如果我们想知道这个系统上还运行着什么服务，我们可以使用 netstat 命令。您还可以使用 ss 命令，这是一个相当新的命令，它的名称有点奇怪。所以我要用 netstat，现在我要教你一些东西。我来自荷兰，荷兰，如果你想到荷兰，你会想到木屐和郁金香，对吗？

**Maxim burger hout(27:42):**
所以我将向 netstat 命令传递几个参数，它们将组成荷兰语单词郁金香。所以你将永远不会忘记郁金香的荷兰语。我需要任何开放的 TCP 连接和 UDP 连接的信息。我想看看监听插座。我想知道正在运行的程序的信息，甚至是一些扩展的信息。我希望看到主机名和端口的数字表示。我不想看到域名:HTTP。我想看看 IP 地址:80 对吗？这才是我想看的。

马克西姆·伯格豪特(28:15):
所以是 netstat -tulpen。Tulpen 在荷兰语中是郁金香的意思。我们走吧。我们要运行这个。这将为我提供一个在这个系统上运行的所有进程的列表，包括端口 8001 上的 httpd 和其他一些进程...sshd 如预期的那样运行在端口 22 上，这是 SSH 端口。

马克西姆·伯格豪特(28:33):
如果你不想离开须藤，我也能做到...如果您想在没有 sudo 的情况下这样做，那也很好，但是您将会错过 PID 和编程信息，如果您要进行一点调试，这些信息非常非常有用。所以我们开始吧。这就是使用 netstat 所做的事情，找出系统上正在运行的进程。有一个，好的，我们再来一个。

马克西姆·伯格豪特(28:55):
我给你看了一点塞利努克斯，塞利努克斯。但我可能还是有点复杂。我只能向你展示其中的一小部分。如果你想学习更多关于 SELinux 的知识，你可以使用 man 命令，对吗？你可以使用 man SELinux，它会给你一个手册页。正如您可能看到的，这个手册页并没有那么长。它只有 69 行，看，你在屏幕的底部。如果我想了解更多关于 SELinux 的知识怎么办？在哪里可以找到更多关于这个运行系统的关于 SELinux 的信息？

马克西姆·伯格豪特(29:21):
有一个叫做 apropos 的命令，它基本上是一个搜索引擎，用来搜索你的手册页。我可以运行适当的 selinux，它会给我一吨。它给了我们将近 80 页关于 SELinux 的手册和信息源，你们都可以阅读，如果你已经阅读了所有这些，你就是一个 SELinux 专家了。这就是 apropos 命令的作用。它适用于很多事情。不仅仅是 Linux 上的命令，还有内核结构和系统的所有其他非常复杂的方面。

马克西姆·伯格豪特(29:51):
但是如果你想对一个话题了解更多，就不要去 man vi，试试 apropos。试试 apropos，apropos 可以给你比一个单独的手册页更多的信息。它只是给你所有的手册页。

马克西姆·伯格豪特(30:03):
我想我快没时间了。我会很快地把我的报告翻一遍。我们走吧。这个，我们已经看过了。如果你想知道更多一点，伯尔已经提到了小抄。这是我写的，所以是高级 Linux 命令。我希望你能看到我的箭。你可以...是的，你可以看到我的箭。SS Linux 命令备忘单在那边。这是伯尔写的，我想比我的早几年。如果你想多了解一点 Linux，这两个都非常非常有用。

Maxim Burgerhout (30:35):
我的意思是，如果你想多了解一点 SELinux，这是 RHEL 8 版的指南，教你在 RHEL 8 机器上部署一个启用了 SELinux 的应用程序所需要知道的一切，请不要关闭 SELinux。SELinux 非常棒，它可以帮助您保持安全。如果你现在说，“但是我没有订阅 RHEL 8。”

马克西姆·伯格豪特(30:53):
是的，你有。你可以去 developers.redhat.com/products/rhel/download.登陆，你可以免费下载 RHEL 8。您可能需要创建一个帐户，但仅此而已。你可以免费订阅 RHEL 8。如果你想了解更多，DevNation Live talks，你可以去 developers.redhat.com/events.，最后，如果你还没有注册参加峰会，可以去 redhat.com/en/summit 和 Developer 20 注册，因为红帽峰会真的是一年中最酷的活动。我想我完了，我不确定我是否能把控制权交还给团队。

**发言人 3 (31:30):**
我们确实有些问题要问你。

**马克西姆·伯格豪特(31:32):**
酷。

说话者 3 (31:32):
我们确实有一些问题要问你。一个直接的问题是，它是只在 bash shell 中工作，还是可以在其他可能是操作系统一部分的 shell 中工作？

**马克西姆·伯格豪特(31:39):**
是的，RHEL 8 附带了几个弹壳。Bash 可能是最流行的，因为它是默认的。我们还至少提供 Zed 外壳或 Z 外壳。我不确定在这种情况下该怎么发音，或者 Korn shell 也是，K shell。这可以在 Bash 上运行，并且大部分也可以在 Zed shell 上运行。历史操作在其他 shells 上可能与 Bash 稍有不同，但是所有其他东西都可以正常工作。

伯尔·萨特(32:09):
是的。没错。说得好。我认为这是一个非常公平的问题。人们喜欢猫 EOS 的东西。我个人很喜欢这个例子。对你展示的不同技巧有很多评论。他们太棒了。Tuxkey 实际上是在帮助回答聊天中的问题。非常感谢图斯克，他对此有另一个问题。你提到的插件，你有更多的资源吗？还有数据链接吗？

马克西姆·伯格豪特(32:31):
我可以给你一些链接，但我现在没有，但我会的...让我更新一下这个幻灯片，我们可以把它放在某个地方，幻灯片下载。我将有一个额外的链接，里面有关于操作 systemd 单元文件的信息，可以吗？

**伯尔萨特(32:45):**
好的。在推特上也是这样吗，这样人们就可以-

马克西姆·伯格豪特(32:47):
哦，是的，绝对是。

伯尔·萨特(32:48):
——随便找一个。

马克西姆·伯格豪特(32:49):
我可以在推特上这样做。是的，我会在推特上做。说得好。

**伯尔萨特(32:54):**
好的。不幸的是，我们的时间不多了，所以希望你们能在这个环节得到一些好的提示和技巧。我觉得非常有趣。我学到了一些东西，我不是一个日常的 Linux 技巧管理员。我更喜欢编程，但是麦克斯，我喜欢。

**马克西姆·伯格豪特(33:05):**
谢谢。

**伯尔·萨特(33:06):**
非常感谢你为我们所做的一切。我们会让你再次上场。

**马克西姆·伯格豪特(33:08):**
不客气。

**伯尔·萨特(33:08):**
你又来到了我们的节目中，我们将谈论一些更酷的内容。Linux 话题在这里总是非常受欢迎，所以非常感谢你们今天的参与。一定要看看我们的 YouTube 频道，订阅那个频道，关注那个频道，你会在这些东西发布的时候得到信息。因此，更多的东西将会出现，如果你有任何问题，请随时在 Twitter 上联系 Max 或我自己，并追踪我们。你也可以在 burr@redhat.com 给我发邮件。B-U-R-R@redhat.com，那会找到我的。但是非常感谢你们。谢谢你。马上回萨凡纳。

*Last updated: June 29, 2020*