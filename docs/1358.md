# 关于什么时候不做微服务

> 原文:[https://developers . red hat . com/blog/2017/10/19/about-when-not-to-do 微服务](https://developers.redhat.com/blog/2017/10/19/about-when-not-to-do-microservices)

我上一篇博客的小插曲。作为我上一篇关于低风险整体微服务架构的博客的一部分，我对微服务和不做微服务做了如下陈述:

> “微服务架构并不总是合适的”。

我有一些有趣的反应。有些类似于“你怎么敢”。大约一个月前，我也在 Twitter 上对此进行了一点探讨

![](../Images/6b60e08426f73b9fab3e942876bf28ea.png)

让我稍微扩展一下。

做微服务，或单片，或 SOA，或微石，或目前流传的任何花哨的术语都不是重点。理想情况下，企业将寻找[新的]方法来交付客户价值，而技术可以成为一个差异化因素。当我们沿着这条“交付价值”的道路前进时，我们面临的关键问题实际上很简单:不确定性。我们真的不知道什么会带来价值。顾客也不善于表达。我们有很多想法，有时是很好的想法，但我们并不真正*知道*什么能给客户带来价值，直到我们试验和尝试。微软发表了一篇关于实验的精彩论文，每个人现在都应该停下来读一读。他们发现的一部分是，66%的“好主意”实际上对它想要实现的指标没有影响(甚至更糟)。那些能够进行廉价实验，进行大量实验，并比竞争对手更快地了解什么能给客户带来价值的人将会胜出。

微服务是为了优化速度。但是还有更多:

[![optimize bml](../Images/d38aab193fbe3da7a97e7b376354b3eb.png)](/sites/default/files/optimize-bml.png)

推文流中关键语句:

> …当您当前的应用程序/组织架构阻碍了这一点或成为瓶颈时。

许多个月前，西蒙·沃德利在博客上写了一篇(对我来说)令人大开眼界的文章，是关于 T2 的拓荒者、定居者和城镇规划者的。基本上，*先锋*专注于为组织创造长期选择。他们的工作本质上充满了未知:谁能预测 3 年或更长时间后会发生什么？先驱们开始尝试狂野的、不同的方法，进行许多实验，希望减少不确定性，不知道什么能在 3 年多的时间里给公司带来价值。这种“开拓性”的努力旨在提供一些不错的选择，我们可以在此基础上更上一层楼。“定居者”最终这样做了。他们想出了如何扩大产品工程、扩大市场营销、销售等。并构建组织的各个部分，使该产品成为一个成功的差异化产品。最终经过多年的竞争扩散等结果。我们的新产品不再与众不同，但仍能带来巨大的价值。它将存在很长一段时间，我们可以做些事情让它更有效地运行。我们可能有很多人在从事这项工作。这些都是@swardley 类比中的城镇规划者。

所以 WTF？这有什么关系？嗯……你认为你在组织中处于什么位置？

## 如果你是先驱者，坚持用巨石柱。

作为先锋，你必须快速行动。你完全不知道一个“东西”是否会带来价值。你想尽可能快地运行廉价的实验并学习。您甚至可能没有编写任何代码！Barry O'Reilly 有一个关于跑步实验的精彩故事。他谈到要开一家网上图片驱动的葡萄酒商店……但不是通过扩建、组织供应商、寻找分销商等方式。我很确定我也听他说过，测试一个假设最低效的方法是完全建立它。在他的故事中，他谈到通过提出一个假设来减少不确定性，比如“给葡萄酒拍照的人可能会想买那种葡萄酒”，并提出廉价的实验来测试这个假设。例如，在 Twitter/脸书/Instagram 上快速搜索发布葡萄酒图片的人，然后给他们发一个回复，里面有一个链接，可以让他们购买葡萄酒。这个实验的目的就是看看人们是否会点击这个链接。进行大量这样的小实验并不需要构建一个完整的产品，而且绝对减少了你想法中的不确定性。在某个时候，你可能会构建一个最小可行的产品。但是，MVP 的目的是测试一个假设并引出学习。MVP 不是产品工程。你建造这个不是为了扩大规模。事实上，你正在做相反的事情。你可能会运行许多 MVP 测试，然后把它们扔掉。一块巨石是解决这一问题的最佳方式。一个整体实际上会让你走得更快，因为快速改变事情可以在一个地方完成。在这一点上做微服务是无限的矫枉过正，并且会让你偏离你的目标:找出一些有价值的东西。

## 如果你是定居者，你可能需要微服务

一旦你偶然发现有价值的东西，你可能会想要扩大它。这涉及到创建一个产品团队:产品经理、测试人员、市场营销、销售等。在产品方面，您将希望添加功能并快速移动，再次运行关于某些功能的较小测试。如果你的团队刚刚起步，规模很小，而且你还在搞清楚业务组织和技术特性的正确界限，不要做微服务。这仍然是产品开发道路的不成熟阶段。你很可能过早地围绕 API、边界等进行优化，并在你需要做出改变时造成一个伤害的世界。同样，我们的目标是快速做出更改并进行测试。一旦你发现你的应用程序有太多的人在工作，你试图让太多的变化相互影响，你可能就要为微服务进行优化了。微服务涉及到很多复杂性。Matt Klein 最近说“不需要的时候不要承担复杂性”。他完全正确。

## 如果你是城市规划者，你可能需要微服务

如果你正在开发已经存在一段时间的旗舰产品，你必须评估你改变产品的速度，以及是否有某些改变的热点。你可能还想在现有的整体/产品中引入新的特性，正如定居者一节所描述的，你可能会遇到组织和系统架构的瓶颈。在这些情况下，微服务可能非常适合你。在这种情况下，微服务可以帮助您优化“速度”。

我们目前在行业中经历了许多[“微服务嫉妒”](https://www.thoughtworks.com/radar/techniques/microservice-envy)。作为技术人员，我们很容易忘记自己的工作，即利用技术帮助发现和培养客户价值。不要在不必要的时候过度优化和复杂化事情。解决自己的问题，而不是别人的。

好吧！[回到 monolith 到微服务迁移的讨论](http://blog.christianposta.com/microservices/low-risk-monolith-to-microservice-evolution/)！敬请期待！

* * *

要构建您的 Java EE 微服务 **请访问** [**野生蜂群**](https://developers.redhat.com/promotions/wildflyswarm-cheatsheet/) **并下载备忘单。**

*Last updated: August 30, 2022*