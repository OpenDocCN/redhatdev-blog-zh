# Kubernetes 是新的应用程序操作环境(第 1 部分)

> 原文:[https://developers . red hat . com/blog/2018/09/05/kubernetes-new-operating-environment](https://developers.redhat.com/blog/2018/09/05/kubernetes-new-operating-environment)

这是考虑 Kubernetes 和应用服务器角色的系列文章的第一篇。应用服务器需要存在吗？当前的情况让开发人员如何为他们的应用程序选择正确的前进道路？

## 为什么 Kubernetes 是新的应用服务器

到目前为止，您可能已经阅读了[“为什么 Kubernetes 是新的应用服务器”](https://developers.redhat.com/blog/2018/06/28/why-kubernetes-is-the-new-application-server/)，并且您可能想知道这对您意味着什么。对 Java EE 或 Jakarta EE 和 Eclipse MicroProfile 有什么影响？应用服务器或者胖罐子呢？这是近二十年来我们所熟知的结局吗？

事实上，这对大多数人来说并没有影响世界观。这与大多数供应商在过去几年中围绕 Docker 和 Kubernetes 部署所做的努力是一致的。此外，人们对服务网格基础设施(如 Istio)以及它们如何进一步协助管理 Kubernetes 部署也更感兴趣。

所有这些因素都是当前开发趋势的驱动因素——将传统上与开发相关的更多关注点向下推到整个堆栈的较低层，关注点转移到基础架构或应用程序运行的操作环境。

在整个系列中，我们将看到没有必要悲观失望。尽管机制可能会改变，但在开发应用程序时，应用服务器和 fat JARs 仍然有一席之地。

## Kubernetes 和容器

正如在[“为什么 Kubernetes 是新的应用服务器”](https://developers.redhat.com/blog/2018/06/28/why-kubernetes-is-the-new-application-server/)一文中所提到的，是的，容器——通过扩展 Kubernetes——简化了部署过程，将所有必要的部分包装成可以部署的单一部分。容器还有助于防止许多与部署到应用服务器相关的问题。这些问题可能包括不正确的配置、JDBC 驱动程序问题以及应用服务器环境之间的不一致。

### 集装箱的好处

然而，并不是容器真正提供了这些好处。正是容器的组合**是不可变的**，因为 Kubernetes 需要不变性来实现故障转移和集群，而像用于验证和部署容器的 **CI/CD** 这样的实践为我们提供了上述好处。我们可以轻松地将糟糕的配置或未经验证的代码放入容器中，并将其部署到生产环境中，就像过去部署到应用服务器时一样。正如人们常说的，如果你把垃圾放进任何东西里，你就能指望收到垃圾出来。

### 可变容器

尽管我们已经提到了不可变的容器，但是它们实际上也可以是可变的，而且方式多种多样。使用 Docker，可以通过将包含新内容的更新图像推送到现有标签来改变容器。更成问题的是标签作为其他标签的符号链接的做法。虽然能够引用一个更通用的容器标记很好，比如 8.x 系列中最新的 MySQL 容器的“8 ”,但是下次使用该映像的容器启动时，它可能使用的是一个完全不同的 MySQL 版本。它可能不是 8.0.11，而是 8.0.12，这应该没问题，但也可能是 8.1.x，这更有可能是一个潜在的问题。

### 集装箱能拯救我们吗？

容器本身并不能拯救我们过去在生产部署中的过失和问题。然而，它们无疑是减少部署问题的解决方案的一部分。容器本身需要大量的过程才能正确完成。不正确地使用容器会导致和不使用容器一样多甚至更多的问题。

## Kubernetes 作为新的应用服务器

当考虑将 Kubernetes 作为新的应用服务器时，有几个因素。我们需要考虑 Kubernetes 提供什么，以及我们的应用或微服务需要什么。如果部署不与其他应用程序交互，并且可能只在数据库中存储一些数据，那么，是的，Kubernetes 确实会成为您的新应用程序服务器。

## 在第 2 部分中

下一次，我们将更深入地探讨应用服务器要解决的问题，将其与作为新应用服务器的 Kubernetes 进行比较。

*Last updated: September 3, 2019*